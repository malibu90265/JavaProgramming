<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="customerDAO">
	<resultMap type="com.sqisoft.iqs.pf.vo.CustomerVO" id="customerResultMap">
		<result property="customer_div"		column="CUSTOMER_DIV" />
		<result property="customer_id"		column="CUSTOMER_ID" />
		<result property="customer_name"	column="CUSTOMER_NAME" />
		<result property="customer_credit"	column="CUSTOMER_CREDIT" />
		<result property="customer_reg_day"	column="CUSTOMER_REG_DAY" />
	</resultMap>
	
	<select id="getCustomerList" resultMap="customerResultMap">
		SELECT	*
		FROM	customer
		WHERE	customer_div=1
		ORDER	BY customer_div ASC,customer_name
	</select>
	
	<select id="customerSearchCont" resultMap="customerResultMap">
		SELECT	*
		FROM	customer
		WHERE	customer_div=0
		ORDER	BY customer_div ASC
				,customer_name
	</select>
	
	<select id="customerSearchList" parameterType="com.sqisoft.iqs.pf.vo.CustomerVO" resultMap="customerResultMap">
		SELECT	*
		FROM	customer
		WHERE
		<if test="customer_div !=-1">
				customer_div=#{customer_div} AND
		</if>
				customer_name LIKE CONCAT('%',#{customer_name},'%')
		ORDER	BY customer_div ASC,customer_name
	</select>
	
	<insert id="insertCustomer" parameterType="com.sqisoft.iqs.pf.vo.CustomerVO">
		INSERT	INTO	customer	(
										customer_div
										, customer_name
										, customer_credit
										, customer_regno
										, customer_loc
										, customer_head
										, customer_reg_day
									)
				VALUES				(
										#{customer_div}
										,#{customer_name}
										,#{customer_credit}
										,#{customer_regno}
										,#{customer_loc}
										,#{customer_head}
										,now()
									)
	</insert>
	
	<select id="getCustomer"  parameterType="com.sqisoft.iqs.pf.vo.CustomerVO" resultMap="customerResultMap">
		SELECT	*
		FROM	customer
		WHERE	customer_name=#{h_name} 
		AND		customer_div=#{customer_div}
	</select>
	
	<update id="customerUpdate" parameterType="com.sqisoft.iqs.pf.vo.CustomerVO">
		UPDATE	customer 
		SET		customer_name=#{customer_name}
				, customer_regno=#{customer_regno}
				, customer_credit=#{customer_credit}
				, customer_head=#{customer_head}
				, customer_loc=#{customer_loc}
				, etc=#{etc}
		WHERE	customer_name=#{h_name} 
		AND		customer_div=#{customer_div}
	</update>
	
	<delete id="deleteCustomer" parameterType="com.sqisoft.iqs.pf.vo.CustomerVO">
		DELETE
		FROM	customer 
		WHERE	customer_name=#{h_name} 
		AND		customer_div=#{customer_div}
	</delete>
</mapper>