<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="weekBudgetDAO">
	<resultMap id="weekChartMap" type="com.sqisoft.iqs.pf.vo.WeekChartVO">
		<result property="team_id"		column="TEAM_ID" />
		<result property="wc_date"		column="WC_DATE" />
		<result property="wc_contract"	column="WC_CONTRACT" />
		<result property="wc_income"	column="WC_INCOME" />
		<result property="wc_netincome"	column="WC_NETINCOME" />
		<result property="wc_ebit"		column="WC_EBIT" />
	</resultMap>
	<insert id="insertWeekChart" parameterType="com.sqisoft.iqs.pf.vo.WeekChartVO">
		INSERT	INTO	week_chart 
						values	(
									#{team_id}
									, now()
									, #{wc_contract}
									, #{wc_income}
									, #{wc_netincome}
									, #{wc_ebit}
								)
	</insert>
	
	<select id="getWeekChartList" resultMap="weekChartMap">
		SELECT	* 
		FROM	week_chart
		ORDER	BY wc_date
				, team_id
	</select>
	
	<select id="getWeekChartListTot" resultMap="weekChartMap">
		SELECT	wc_date
				, SUM(wc_contract) wc_contract
				, SUM(wc_income) wc_income
				, SUM(wc_netincome) wc_netincome
				, SUM(wc_ebit) wc_ebit 
		FROM	week_chart
		GROUP	BY wc_date 
		order	by wc_date
	</select>


</mapper>
