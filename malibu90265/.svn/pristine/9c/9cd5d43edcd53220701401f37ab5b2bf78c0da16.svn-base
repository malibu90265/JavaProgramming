<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="basicInfoDAO">
	
	<!-- 기술분류  -->
	<select id="getSkillEnvDivisionList" resultType="string">
		SELECT	DISTINCT environment_division
		FROM	skill_env
	</select>
	
	<select id="getSkillEnvListByDivision" parameterType="map" resultMap="project_settingDAO.project_settingSkillResultMap">
		SELECT	*
		FROM	skill_env
		WHERE	environment_division = #{skillEnvDivision}
		ORDER	BY	each_environment
	</select>
	
	<select id="getSkillEnv" parameterType="map" resultType="com.sqisoft.iqs.project_setting.vo.Skill_envVO">
		SELECT	*
		FROM	skill_env
		WHERE	environment_division = #{skillEnvDivision}
		AND		each_environment = #{skillEnvironment}
	</select>
	
	<select id="isSkillEnv" parameterType="com.sqisoft.iqs.project_setting.vo.Skill_envVO" resultType="_int">
		SELECT	COUNT(*)
		FROM	skill_env
		WHERE	environment_division = #{environment_division}
		AND		each_environment = #{each_environment}
	</select>
	
	<insert id="insertSkillEnv" parameterType="com.sqisoft.iqs.project_setting.vo.Skill_envVO">
		INSERT	INTO	skill_env
		VALUES(#{environment_division}, #{each_environment})	
	</insert>
	
	<update id="modifySkillEnv" parameterType="map">
		UPDATE	skill_env
		SET		environment_division = #{environment_division_modify}
				, each_environment = #{each_environment_modify}
		WHERE	environment_division = #{environment_division_origin}
		AND		each_environment = #{each_environment_origin}
	</update>
	
	<delete id="deleteSkillEnv" parameterType="com.sqisoft.iqs.project_setting.vo.Skill_envVO">
		DELETE
		FROM	skill_env
		WHERE	environment_division = #{environment_division}
		AND		each_environment = #{each_environment}
	</delete>
	
	<!-- 직무기술 -->
	<select id="getJobSkillList" resultType="string">
		SELECT	DISTINCT	business_division
		FROM	job_skill
	</select>
	
	<resultMap type="com.sqisoft.iqs.admin.basicinfo.vo.JobSkillVO" id="jobSkillResultMap">
		<id		property="business_division"	column="business_division"/>
		<result	property="each_skill"			column="each_skill"/>
	</resultMap>

	<select id="getJobSkillListByDivision" parameterType="string" resultMap="jobSkillResultMap">
		SELECT	*
		FROM	job_skill
		WHERE	business_division = #{business_division}
		ORDER	BY	each_skill
	</select>
	
	<select id="getJobSkill" parameterType="map" resultType="com.sqisoft.iqs.admin.basicinfo.vo.JobSkillVO">
		SELECT	*
		FROM	job_skill
		WHERE	business_division = #{business_division}
		AND		each_skill = #{each_skill}
	</select>
	
	<select id="isJobSkill" parameterType="map" resultType="_int">
		SELECT	COUNT(*)
		FROM	job_skill
		WHERE	business_division = #{business_division}
		AND		each_skill = #{each_skill}
	</select>
	
	<insert id="insertJobSkill">
		INSERT	INTO	job_skill
		VALUES (#{business_division}, #{each_skill})
	</insert>
	
	<update id="modifyJobSkill" parameterType="map">
		UPDATE	job_skill
		SET		business_division = #{business_division_modify}
				, each_skill = #{each_skill_modify}
		WHERE	business_division = #{business_division_origin}
		AND		each_skill = #{each_skill_origin}
	</update>
	
	<delete id="deleteJobSkill" parameterType="com.sqisoft.iqs.admin.basicinfo.vo.JobSkillVO">
		DELETE
		FROM	job_skill
		WHERE	business_division = #{business_division}
		AND		each_skill = #{each_skill}
	</delete>

	<!-- 업무분류 -->
	<select id="getDomainList" resultType="com.sqisoft.iqs.admin.basicinfo.vo.DomainVO">
		SELECT	*
		FROM	domain
	</select>
	
	<select id="getDomain" resultType="com.sqisoft.iqs.admin.basicinfo.vo.DomainVO">
		SELECT	*
		FROM	domain
		WHERE	each_domain = #{each_domain}
	</select>
	
	<select id="isDoamin" parameterType= "string" resultType="_int">
		SELECT	COUNT(*)
		FROM	domain
		WHERE	each_domain = #{each_domain}
	</select>
	
	<insert id="insertDomain" parameterType="string">
		INSERT	INTO domain (each_domain)
		VALUES	(#{each_domain})	
	</insert>
	
	<update id="modifyDomain" parameterType="com.sqisoft.iqs.admin.basicinfo.vo.DomainVO">
		UPDATE	domain
		SET		each_domain = #{each_domain}
		WHERE	domain_id = #{domain_id}	
	</update>
	
	<delete id="deleteDomain" parameterType="string">
		DELETE
		FROM	domain
		WHERE	each_domain = #{each_domain}
	</delete>

	<!-- 역할분류 -->
	<select id="checkDuplicateYN" parameterType="string" resultType="_int">
		SELECT	COUNT(*)
		FROM	role
		WHERE	each_role = #{each_role}
	</select>
	
	<insert id="insertRoleAjax" parameterType="string">
		INSERT	INTO role (each_role)
		VALUES	(#{each_role})
	</insert>

	<select id="getRoleByEachRole" parameterType="string" resultType="string">
		SELECT	role_id
		FROM	role
		WHERE	each_role = #{each_role}
	</select>
	
	<update id="modifyRoleAjax" parameterType="com.sqisoft.iqs.admin.basicinfo.vo.RoleVO" >
		UPDATE	role
		SET		each_role = #{each_role}
		WHERE	role_id = #{role_id}
	</update>
	
	<delete id="deleteRoleAjax" parameterType="com.sqisoft.iqs.admin.basicinfo.vo.RoleVO">
		DELETE
		FROM	role
		WHERE	role_id = #{role_id}
	</delete>
	
	<!-- 영업단계 -->
	<select id="isPjStage" parameterType="string" resultType="int">
		SELECT	COUNT(*)
		FROM	pj_stage
		WHERE	pj_stage_name = #{pj_stage_name}
	</select>
	
	<insert id="insertPjStage" parameterType="string">
		INSERT	INTO pj_stage (pj_stage_name)
		VALUES	(#{pj_stage_name})
	</insert>
	
	<update id="modifyPjStage" parameterType="com.sqisoft.iqs.project.vo.ProjectStageVO">
		UPDATE	pj_stage
		SET		pj_stage_name = #{pj_stage_name}
		WHERE	pj_stage_id = #{pj_stage_id}
	</update>
	
	<delete id="deletePjStageAjax" parameterType="string">
		DELETE	
		FROM	pj_stage
		WHERE	pj_stage_id = #{pj_stage_id}
	</delete>
		
	<!-- 추진상태 -->
	<select id="getProjectStatusById" parameterType="_int" resultType="com.sqisoft.iqs.project.vo.ProjectStatusVO">
		SELECT	*
		FROM	pj_status
		WHERE	pj_status_id = #{pj_status_id}
	</select>
	
	<select id="isProjectStatus" parameterType="string" resultType="_int">
		SELECT	COUNT(*)
		FROM	pj_status
		WHERE	pj_status_name = #{pj_status_name}
	</select>
	
	<insert id="insertProjectStatus" parameterType="com.sqisoft.iqs.project.vo.ProjectStatusVO">
		INSERT	INTO pj_status (pj_status_name, pj_status_color)
		VALUES	(#{pj_status_name}, #{pj_status_color})
	</insert>
	
	<update id="modifyProjectStatus" parameterType="com.sqisoft.iqs.project.vo.ProjectStatusVO">
		UPDATE	pj_status
		SET		pj_status_name = #{pj_status_name}, pj_status_color = #{pj_status_color}
		WHERE	pj_status_id = #{pj_status_id}
	</update>
	
	<delete id="deletePjStatus" parameterType="_int">
		DELETE
		FROM	pj_status
		WHERE	pj_status_id = #{pj_status_id}
	</delete>
	
</mapper>